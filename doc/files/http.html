<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/base64.html">base64</a>
	</li>

	<li>
		<a href="../modules/http.html">http</a>
	</li>

	<li>
		<a href="../modules/tcp.html">tcp</a>
	</li>

	<li>
		<a href="../modules/util.html">util</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../files/base64.html">base64.lua</a>
	</li>

	<li><strong>http.lua</strong></li>
	
	<li>
		<a href="../files/tcp.html">tcp.lua</a>
	</li>

	<li>
		<a href="../files/util.html">util.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>http.lua</code></h1>


<p>NCLua HTTP v0.9.9: Módulo para envio e recebimento de requisições HTTP em aplicações NCLua para TV Digital, possibilitando também, o download de arquivos por meio de tal protocolo.<br/> Utiliza a classe tcp disponibilizada no <a href="http://www.telemidia.puc-rio.br/~francisco/nclua/tutorial/index.html">Tutorial de NCLua</a> e o módulo de conversão de/para base64 disponível em <a href="http://lua-users.org/wiki/BaseSixtyFour">Lua Users</a><p/> @licence: <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/br/">http://creativecommons.org/licenses/by-nc-sa/2.5/br/</a></p>


<p><b>Author:</b>
<table class="authors_list">

	<tr><td class="name">Manoel Campos da Silva Filho<br/> Professor do Instituto Federal de Educação, Ciência e Tecnologia do Tocantins<br/> Mestrando em Engenharia Elétrica na Universidade de Brasília, na área de TV Digital<br/> <a href="http://manoelcampos.com">http://manoelcampos.com</a></td></tr>

</table>
</p>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#getFile">getFile</a>&nbsp;(url, callback, fileName, userAgent, user, password, port)</td>
	<td class="summary">Envia uma requisição HTTP para uma URL que represente um arquivo, e então faz o download do mesmo.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#getHeaderAndContent">getHeaderAndContent</a>&nbsp;(response)</td>
	<td class="summary">Separa o header do body de uma resposta a uma requisição HTTP </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#getHttpHeader">getHttpHeader</a>&nbsp;(header, fieldName)</td>
	<td class="summary">Obtém o valor de um determinado campo de uma resposta HTTP </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#request">request</a>&nbsp;(url, callback, method, params, userAgent, headers, user, password, port)</td>
	<td class="summary">Envia uma requisição HTTP para um determinado servidor </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#splitUrl">splitUrl</a>&nbsp;(url)</td>
	<td class="summary">Obtém uma URL e divide a mesma em protocolo, host, porta e path </td>
	</tr>

</table>






<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="getFile"></a><strong>getFile</strong>&nbsp;(url, callback, fileName, userAgent, user, password, port)</dt>
<dd>
Envia uma requisição HTTP para uma URL que represente um arquivo, e então faz o download do mesmo.


<h3>Parameters</h3>
<ul>
	
	<li>
	  url: URL para a página que deseja-se acessar. A mesma pode incluir um número de porta, não necessitando usar o parâmetro port.
	</li>
	
	<li>
	  callback: Função de callback a ser executada quando a resposta da requisição for obtida. A mesma deve possuir em sua assinatura, um parâmetro header e um body, que conterão, respectivamente, os headers retornados e o corpo da resposta (os dois como strings).
	</li>
	
	<li>
	  fileName: Caminho completo para salvar o arquivo localmente. Só deve ser usado para depuração, pois passando-se um nome de arquivo, fará com que a função use o módulo io, não disponível no Ginga. Para uso em ambientes reais (Set-top boxes), deve-se passar nil para o parâmetro
	</li>
	
	<li>
	  userAgent: Nome/versão do cliente http. Opcional
	</li>
	
	<li>
	  user: Usuário para autenticação básica. Opcional
	</li>
	
	<li>
	  password: Senha para autenticação básição. Opcional
	</li>
	
	<li>
	  port: Porta a ser utilizada para a conexão. O padrão é 80, no caso do valor ser omitido. A porta também pode ser especificada diretamente na URL. Se for indicada uma porta lá e aqui no parâmetro port, a porta da url é que será utilizada e a do parâmetro port será ignorada.
	</li>
	
</ul>






<h3>Return value:</h3>
Se o parâmetro fileName for diferente de nil, retorna true em caso de sucesso, e false em caso de erro. Caso contrário, retorna o conteúdo do arquivo, caso o mesmo seja obtido, caso contrário, retorna false.



</dd>




<dt><a name="getHeaderAndContent"></a><strong>getHeaderAndContent</strong>&nbsp;(response)</dt>
<dd>
Separa o header do body de uma resposta a uma requisição HTTP


<h3>Parameters</h3>
<ul>
	
	<li>
	  response: String contendo a resposta a uma requisição HTTP
	</li>
	
</ul>






<h3>Return value:</h3>
Retorna o header e o body da resposta da requisição



</dd>




<dt><a name="getHttpHeader"></a><strong>getHttpHeader</strong>&nbsp;(header, fieldName)</dt>
<dd>
Obtém o valor de um determinado campo de uma resposta HTTP


<h3>Parameters</h3>
<ul>
	
	<li>
	  header: Conteúdo do cabeçalho da resposta HTTP de onde deseja-se extrair o valor de um campo do cabeçalho
	</li>
	
	<li>
	  fieldName: Nome do campo no cabeçalho HTTP
	</li>
	
</ul>








</dd>




<dt><a name="request"></a><strong>request</strong>&nbsp;(url, callback, method, params, userAgent, headers, user, password, port)</dt>
<dd>
Envia uma requisição HTTP para um determinado servidor


<h3>Parameters</h3>
<ul>
	
	<li>
	  url: URL para a página que deseja-se acessar. A mesma pode incluir um número de porta, não necessitando usar o parâmetro port.
	</li>
	
	<li>
	  callback: Função de callback a ser executada quando a resposta da requisição for obtida. A mesma deve possuir em sua assinatura, um parâmetro header e um body, que conterão, respectivamente, os headers retornados e o corpo da resposta (os dois como strings).
	</li>
	
	<li>
	  method: Método HTTP a ser usado: GET ou POST. Se omitido, é usado GET. onde a requisição deve ser enviada
	</li>
	
	<li>
	  params: String com o conteúdo a ser adicionado à requisição, ou uma tabela, contendo pares de paramName=value, no caso de requisições post enviando campos de formulário. Deve estar no formato URL Encode. No caso de requisições GET, os parâmetros devem ser passados diretamente na URL. Opcional
	</li>
	
	<li>
	  userAgent: Nome da aplicação/versão que está enviando a requisição. Opcional
	</li>
	
	<li>
	  headers: Headers HTTP adicionais a serem incluídos na requisição. Opcional
	</li>
	
	<li>
	  user: Usuário para autenticação básica. Opcional
	</li>
	
	<li>
	  password: Senha para autenticação básição. Opcional
	</li>
	
	<li>
	  port: Porta a ser utilizada para a conexão. O padrão é 80, no caso do valor ser omitido. A porta também pode ser especificada diretamente na URL. Se for indicada uma porta lá e aqui no parâmetro port, a porta da url é que será utilizada e a do parâmetro port será ignorada.
	</li>
	
</ul>






<h3>Return value:</h3>
Retorna o header e o body da resposta da requisição HTTP



</dd>




<dt><a name="splitUrl"></a><strong>splitUrl</strong>&nbsp;(url)</dt>
<dd>
Obtém uma URL e divide a mesma em protocolo, host, porta e path


<h3>Parameters</h3>
<ul>
	
	<li>
	  url: URL a ser dividida
	</li>
	
</ul>






<h3>Return value:</h3>
Retorna o protocolo, host, porta e o path obtidas da URL. Caso algum destes valores não exita na URL, é retornada uma string vazia no seu lugar.



</dd>


</dl>







</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
